# ğŸ“± MERN Auth Project - Visual Guide & Component Flow

## ğŸ¨ UI Component Layouts

### Login Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    â”‚
â”‚     â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚
â”‚     â•‘   Welcome Back         â•‘    â”‚
â”‚     â•‘  Login to your account â•‘    â”‚
â”‚     â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘    â”‚
â”‚     â•‘ â”‚ Email Address:       â”‚â•‘    â”‚
â”‚     â•‘ â”‚ [____________________]â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ Password:            â”‚â•‘    â”‚
â”‚     â•‘ â”‚ [____________________] ğŸ‘  â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ âš  Error Message      â”‚â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ [    LOGIN BUTTON    ]â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ Don't have account?  â”‚â•‘    â”‚
â”‚     â•‘ â”‚ Create one here  â†’   â”‚â•‘    â”‚
â”‚     â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘    â”‚
â”‚     â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                    â”‚
â”‚ Gradient Background (Purple)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Register Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    â”‚
â”‚     â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚
â”‚     â•‘   Create Account       â•‘    â”‚
â”‚     â•‘   Join us today        â•‘    â”‚
â”‚     â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘    â”‚
â”‚     â•‘ â”‚ Full Name:           â”‚â•‘    â”‚
â”‚     â•‘ â”‚ [____________________]â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ Email Address:       â”‚â•‘    â”‚
â”‚     â•‘ â”‚ [____________________]â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ Password:            â”‚â•‘    â”‚
â”‚     â•‘ â”‚ [____________________] ğŸ‘  â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ Confirm Password:    â”‚â•‘    â”‚
â”‚     â•‘ â”‚ [____________________] ğŸ‘  â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ âš  Error Message      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ âœ“ Success Message    â”‚â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ [   REGISTER BUTTON  ]â•‘    â”‚
â”‚     â•‘ â”‚                      â”‚â•‘    â”‚
â”‚     â•‘ â”‚ Already have account?â”‚â•‘    â”‚
â”‚     â•‘ â”‚ Sign in here  â†’      â”‚â•‘    â”‚
â”‚     â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘    â”‚
â”‚     â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                    â”‚
â”‚ Gradient Background (Pink/Red)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dashboard Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard              [LOGOUT]    â”‚
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚ â•‘  Welcome to Dashboard          â•‘ â”‚
â”‚ â•‘                                â•‘ â”‚
â”‚ â•‘ â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—  â•‘ â”‚
â”‚ â•‘ â•‘ User Information         â•‘  â•‘ â”‚
â”‚ â•‘ â•‘                          â•‘  â•‘ â”‚
â”‚ â•‘ â•‘ Full Name:  John Doe     â•‘  â•‘ â”‚
â”‚ â•‘ â•‘ Email:      john@ex.com  â•‘  â•‘ â”‚
â”‚ â•‘ â•‘ User ID:    507f1f77...  â•‘  â•‘ â”‚
â”‚ â•‘ â•‘                          â•‘  â•‘ â”‚
â”‚ â•‘ â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•  â•‘ â”‚
â”‚ â•‘                                â•‘ â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Component Interaction Flow

### Detailed Component Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   App Router (app.routes.ts)                    â”‚
â”‚  â€¢ '' â†’ /login                                                   â”‚
â”‚  â€¢ /login â†’ LoginComponent                                      â”‚
â”‚  â€¢ /register â†’ RegisterComponent                                â”‚
â”‚  â€¢ /dashboard â†’ DashboardComponent                              â”‚
â”‚  â€¢ ** â†’ /login (wildcard)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AuthService (Core Business Logic)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Private State:                                                   â”‚
â”‚  â€¢ currentUserSubject$ - Observable<User | null>               â”‚
â”‚  â€¢ isAuthenticatedSubject$ - Observable<boolean>               â”‚
â”‚  â€¢ authToken - Stored in localStorage                           â”‚
â”‚  â€¢ currentUser - Stored in localStorage                         â”‚
â”‚                                                                  â”‚
â”‚ Public Methods:                                                 â”‚
â”‚  â€¢ register(name, email, pass, confirmPass) â†’ Promise          â”‚
â”‚  â€¢ login(email, password) â†’ Promise                            â”‚
â”‚  â€¢ logout() â†’ void                                             â”‚
â”‚  â€¢ getCurrentUser() â†’ Promise                                  â”‚
â”‚  â€¢ isAuthenticated() â†’ boolean                                 â”‚
â”‚  â€¢ getStoredUser() â†’ User | null                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â†‘             â†‘              â†‘
        |             |              |
        |             |              |
        â†“             â†“              â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LoginComp     â”‚ â”‚ RegisterComp     â”‚ â”‚ DashboardComp    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Properties:    â”‚ â”‚ Properties:      â”‚ â”‚ Properties:      â”‚
â”‚  â€¢ email       â”‚ â”‚  â€¢ fullName      â”‚ â”‚  â€¢ user          â”‚
â”‚  â€¢ password    â”‚ â”‚  â€¢ email         â”‚ â”‚  â€¢ isLoading     â”‚
â”‚  â€¢ isLoading   â”‚ â”‚  â€¢ password      â”‚ â”‚  â€¢ errorMsg      â”‚
â”‚  â€¢ errorMsg    â”‚ â”‚  â€¢ confirmPass   â”‚ â”‚                  â”‚
â”‚  â€¢ successMsg  â”‚ â”‚  â€¢ isLoading     â”‚ â”‚ Methods:         â”‚
â”‚  â€¢ showPass    â”‚ â”‚  â€¢ errorMsg      â”‚ â”‚  â€¢ ngOnInit()    â”‚
â”‚                â”‚ â”‚  â€¢ successMsg    â”‚ â”‚  â€¢ logout()      â”‚
â”‚ Methods:       â”‚ â”‚  â€¢ showPass      â”‚ â”‚  â€¢ loadUser()    â”‚
â”‚  â€¢ onSubmit()  â”‚ â”‚  â€¢ showConfirm   â”‚ â”‚                  â”‚
â”‚  â€¢ validate()  â”‚ â”‚                  â”‚ â”‚                  â”‚
â”‚  â€¢ togglePass()â”‚ â”‚ Methods:         â”‚ â”‚                  â”‚
â”‚                â”‚ â”‚  â€¢ onSubmit()    â”‚ â”‚                  â”‚
â”‚                â”‚ â”‚  â€¢ validate()    â”‚ â”‚                  â”‚
â”‚                â”‚ â”‚  â€¢ togglePass()  â”‚ â”‚                  â”‚
â”‚                â”‚ â”‚  â€¢ toggleConfirm()                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authentication Flow Detailed

### Registration Process

```
1. User fills form on RegisterComponent
   â”œâ”€ fullName: "John Doe"
   â”œâ”€ email: "john@example.com"
   â”œâ”€ password: "password123"
   â””â”€ confirmPassword: "password123"

2. User clicks Register button
   â””â”€ onSubmit() triggers

3. Client-side validation in RegisterComponent
   â”œâ”€ Check all fields filled
   â”œâ”€ Validate email format
   â”œâ”€ Check password length (>= 6)
   â”œâ”€ Check passwords match
   â””â”€ If any fail â†’ Show error message â†’ Stop

4. If validation passes:
   â””â”€ Call authService.register()

5. AuthService calls Axios to POST /api/auth/register
   â”œâ”€ Headers: { Content-Type: application/json }
   â”œâ”€ Body: { fullName, email, password, confirmPassword }
   â””â”€ Waiting for response...

6. Backend receives request in authController.register()
   â”œâ”€ Validate input again (server-side)
   â”œâ”€ Check if email already exists
   â”‚  â”œâ”€ If exists â†’ Return 409: "Email already registered"
   â”‚  â””â”€ Stop
   â”œâ”€ Validate password format
   â”œâ”€ Create new User document
   â”œâ”€ Pre-save hook hashes password with bcryptjs
   â”œâ”€ Save to MongoDB
   â”œâ”€ Generate JWT token (7 day expiry)
   â”œâ”€ Return 201: { success: true, data: { userId, fullName, email, token } }
   â””â”€ Wait for frontend response...

7. Frontend receives response in AuthService
   â”œâ”€ Check if response.success === true
   â”œâ”€ Save token to localStorage['authToken']
   â”œâ”€ Save user to localStorage['currentUser']
   â”œâ”€ Update BehaviorSubjects (currentUser$, isAuthenticated$)
   â””â”€ Return promise to RegisterComponent

8. RegisterComponent receives promise
   â”œâ”€ Show success message: "User registered successfully"
   â”œâ”€ Wait 1.5 seconds
   â””â”€ Redirect to /dashboard using router.navigate()

9. DashboardComponent initializes (ngOnInit)
   â”œâ”€ Check if authenticated using authService.isAuthenticated()
   â”œâ”€ If not authenticated â†’ Redirect to /login
   â”œâ”€ If authenticated â†’ Load user data
   â””â”€ Display user information

âœ“ Registration Complete!
```

### Login Process

```
1. User fills form on LoginComponent
   â”œâ”€ email: "john@example.com"
   â””â”€ password: "password123"

2. User clicks Login button
   â””â”€ onSubmit() triggers

3. Client-side validation in LoginComponent
   â”œâ”€ Check email filled and valid format
   â”œâ”€ Check password filled
   â””â”€ If any fail â†’ Show error message â†’ Stop

4. If validation passes:
   â””â”€ Call authService.login(email, password)

5. AuthService calls Axios to POST /api/auth/login
   â”œâ”€ Headers: { Content-Type: application/json }
   â”œâ”€ Body: { email, password }
   â””â”€ Waiting for response...

6. Backend receives request in authController.login()
   â”œâ”€ Validate input
   â”œâ”€ Find user by email in MongoDB
   â”‚  â”œâ”€ If not found â†’ Return 401: "Invalid email or password"
   â”‚  â””â”€ Stop
   â”œâ”€ Compare provided password with hashed password using bcryptjs
   â”‚  â”œâ”€ If doesn't match â†’ Return 401: "Invalid email or password"
   â”‚  â””â”€ Stop
   â”œâ”€ Check if user isActive === true
   â”‚  â”œâ”€ If false â†’ Return 403: "Account deactivated"
   â”‚  â””â”€ Stop
   â”œâ”€ Generate JWT token (7 day expiry)
   â”œâ”€ Return 200: { success: true, data: { userId, fullName, email, token } }
   â””â”€ Wait for frontend response...

7. Frontend receives response in AuthService
   â”œâ”€ Check if response.success === true
   â”œâ”€ Save token to localStorage['authToken']
   â”œâ”€ Save user to localStorage['currentUser']
   â”œâ”€ Update BehaviorSubjects (currentUser$, isAuthenticated$)
   â””â”€ Return promise to LoginComponent

8. LoginComponent receives promise
   â”œâ”€ Show success message: "Login successful"
   â”œâ”€ Wait 1.5 seconds
   â””â”€ Redirect to /dashboard using router.navigate()

9. DashboardComponent initializes (ngOnInit)
   â”œâ”€ Check if authenticated
   â”œâ”€ Load user data from authService
   â””â”€ Display user information

âœ“ Login Complete!
```

### Protected Route Access

```
DashboardComponent â†’ GET /api/auth/me

1. Axios interceptor adds token to request
   â”œâ”€ Get token from localStorage
   â”œâ”€ Add header: Authorization: Bearer <token>
   â””â”€ Send request with token

2. Backend receives request in authMiddleware
   â”œâ”€ Extract token from Authorization header
   â”œâ”€ Verify token using jwt.verify()
   â”‚  â”œâ”€ If invalid â†’ Return 401: "Invalid token"
   â”‚  â”œâ”€ If expired â†’ Return 401: "Token expired"
   â”‚  â””â”€ Stop
   â”œâ”€ Decode token â†’ Get userId & email
   â”œâ”€ Add userId and email to req object
   â””â”€ Call next() to proceed to controller

3. Backend in authController.getCurrentUser()
   â”œâ”€ Get userId from req (set by middleware)
   â”œâ”€ Find user by userId in MongoDB
   â”œâ”€ Return 200: { success: true, data: { userId, fullName, email, createdAt } }
   â””â”€ Send to frontend

4. Frontend receives protected user data
   â”œâ”€ Update user component properties
   â””â”€ Display user information

âœ“ Protected Route Access Complete!
```

### Logout Process

```
1. User clicks Logout button on DashboardComponent
   â””â”€ logout() method triggers

2. DashboardComponent calls authService.logout()

3. AuthService.logout() executes
   â”œâ”€ Remove token from localStorage['authToken']
   â”œâ”€ Remove user from localStorage['currentUser']
   â”œâ”€ Update currentUserSubject$ â†’ null
   â”œâ”€ Update isAuthenticatedSubject$ â†’ false
   â””â”€ Complete

4. DashboardComponent receives logout completion
   â”œâ”€ Router redirects to /login
   â””â”€ Stop

âœ“ Logout Complete!
```

---

## ğŸ”„ State Management Flow

### AuthService State

```
Initial State (App Load):
â”œâ”€ Check localStorage for token
â”œâ”€ If token exists:
â”‚  â”œâ”€ currentUserSubject$ = parsed user from localStorage
â”‚  â””â”€ isAuthenticatedSubject$ = true
â””â”€ If no token:
   â”œâ”€ currentUserSubject$ = null
   â””â”€ isAuthenticatedSubject$ = false

After Registration/Login:
â”œâ”€ Token saved to localStorage
â”œâ”€ User data saved to localStorage
â”œâ”€ currentUserSubject$ = new user data (emits)
â””â”€ isAuthenticatedSubject$ = true (emits)

After Logout:
â”œâ”€ Token removed from localStorage
â”œâ”€ User data removed from localStorage
â”œâ”€ currentUserSubject$ = null (emits)
â””â”€ isAuthenticatedSubject$ = false (emits)

Components Subscribe to Observable:
â”œâ”€ authService.currentUser$ â†’ Get user data
â”œâ”€ authService.isAuthenticated$ â†’ Check if logged in
â””â”€ Automatically update when state changes
```

---

## ğŸ“Š Data Flow Through Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PRESENTATION LAYER (Angular Components)                    â”‚
â”‚                                                             â”‚
â”‚ LoginComponent / RegisterComponent / DashboardComponent    â”‚
â”‚ â”œâ”€ Display form/data to user                               â”‚
â”‚ â”œâ”€ Capture user input                                       â”‚
â”‚ â””â”€ Call AuthService methods                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ HTTP Request with JSON
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMMUNICATION LAYER (Axios Interceptor)                    â”‚
â”‚                                                             â”‚
â”‚ â”œâ”€ Attach Authorization header with token                  â”‚
â”‚ â”œâ”€ Serialize request body to JSON                          â”‚
â”‚ â””â”€ Handle response & errors                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ HTTP over network
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API LAYER (Express.js Routes & Middleware)                 â”‚
â”‚                                                             â”‚
â”‚ CORS Middleware â†’ JSON Parser â†’ Auth Middleware            â”‚
â”‚ â”œâ”€ Verify token (if protected route)                       â”‚
â”‚ â””â”€ Add user info to request                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ Route matched
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BUSINESS LOGIC LAYER (Controllers)                         â”‚
â”‚                                                             â”‚
â”‚ authController (register, login, getCurrentUser)           â”‚
â”‚ â”œâ”€ Validate input                                          â”‚
â”‚ â”œâ”€ Apply business rules                                    â”‚
â”‚ â””â”€ Prepare response                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DATABASE LAYER       â”‚  â”‚ UTILITY LAYER        â”‚
â”‚ (MongoDB)            â”‚  â”‚ (bcryptjs, jwt)      â”‚
â”‚                      â”‚  â”‚                      â”‚
â”‚ Users Collection     â”‚  â”‚ Password Hashing     â”‚
â”‚ â”œâ”€ Find             â”‚  â”‚ Token Generation     â”‚
â”‚ â”œâ”€ Create           â”‚  â”‚ Token Verification   â”‚
â”‚ â””â”€ Update           â”‚  â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    Response Data
                           â”‚
                           â†“
              Return to API â†’ Axios â†’ Component
                           â”‚
                           â†“
              Update Component State
                           â”‚
                           â†“
              Display to User
```

---

## ğŸ§¬ Class & Interface Definitions

### User Interface (Frontend)

```typescript
interface User {
  userId: string;
  fullName: string;
  email: string;
}

interface AuthResponse {
  success: boolean;
  message: string;
  data: {
    userId: string;
    fullName: string;
    email: string;
    token: string;
  };
}
```

### User Schema (Backend - MongoDB)

```javascript
{
  _id: ObjectId,           // MongoDB auto-generated
  fullName: String,        // Required, 2-50 chars
  email: String,           // Required, unique, valid format
  password: String,        // Required, hashed
  isActive: Boolean,       // Default: true
  createdAt: Date,         // Auto, set on creation
  updatedAt: Date          // Auto, updated on change
}
```

---

## ğŸ¯ Key Takeaways

1. **Frontend** handles UI and user input
2. **AuthService** manages API communication and state
3. **Backend** handles business logic and database
4. **JWT tokens** maintain session without server storage
5. **BehaviorSubjects** notify components of state changes
6. **Middleware** protects routes and verifies tokens
7. **LocalStorage** persists authentication data
8. **Validators** ensure data integrity at each layer

---

**This visual guide helps understand the complete flow of the authentication system!** ğŸ“

